---
# Front matter ini penting agar Jekyll memproses halaman ini
layout: default
title: Keanggotaan
---
<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <!-- Pengaturan Dasar & SEO -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keanggotaan - PKC PMII Bali Nusra</title>
    <meta name="description" content="Bergabunglah dengan Pergerakan Mahasiswa Islam Indonesia (PMII) Bali-Nusa Tenggara. Isi formulir pendaftaran untuk menjadi kader pergerakan.">
    <meta name="keywords" content="Daftar PMII, Keanggotaan PMII, Formulir PMII, PMII Bali Nusra">

    <!-- Ikon, Font, dan Library Eksternal -->
    <link rel="icon" type="image/png" href="https://i.imgur.com/8kYbzKq.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Library untuk membuat PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- Style Kustom -->
    <style>
        body { font-family: 'Inter', sans-serif; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; background-color: #ffffff; }
        .cta-gradient { background: linear-gradient(90deg, #0973D6, #2918A9); }
        .spinner { width: 56px; height: 56px; border: 8px solid rgba(255, 255, 255, .3); border-top-color: #FFCB05; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes slideInFromBottom { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .animate-on-scroll { opacity: 0; }
        .animate-slide-in-bottom { animation: slideInFromBottom .6s ease-out forwards; }
        .form-input:focus { border-color: #0973D6; box-shadow: 0 0 0 3px rgba(9, 115, 214, 0.2); outline: none; }
        .message-box { font-size: 0.875rem; margin-top: 1rem; padding: 0.75rem 1rem; border-radius: 0.5rem; display: none; }
        .message-box.error { color: #991b1b; background-color: #fef2f2; border: 1px solid #fecaca; }
        .message-box.success { color: #14532d; background-color: #f0fdf4; border: 1px solid #bbf7d0; }
    </style>
</head>
<body class="text-gray-800">

    <!-- ===== PRELOADER ===== -->
    <div id="preloader" class="fixed inset-0 z-[100] flex items-center justify-center cta-gradient">
        <div class="spinner"></div>
    </div>

    <!-- ===== HEADER & NAVIGASI ===== -->
    <header id="header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 cta-gradient shadow-xl">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-3 flex justify-between items-center">
            <a href="{{ site.baseurl }}/"><img src="https://i.imgur.com/0CzQrgV.png" alt="Logo PKC PMII Bali Nusra" class="h-10 md:h-12"></a>
            <nav id="desktop-nav" class="hidden md:flex items-center space-x-6 lg:space-x-8">
                <a href="{{ site.baseurl }}/" class="text-white text-sm font-semibold hover:text-yellow-300 transition-colors">Beranda</a>
                <a href="{{ site.baseurl }}/tentang.html" class="text-white text-sm font-semibold hover:text-yellow-300 transition-colors">Tentang</a>
                <a href="{{ site.baseurl }}/pengurus.html" class="text-white text-sm font-semibold hover:text-yellow-300 transition-colors">Pengurus</a>
                <a href="{{ site.baseurl }}/rilis.html" class="text-white text-sm font-semibold hover:text-yellow-300 transition-colors">Rilis</a>
            </nav>
            <a href="{{ site.baseurl }}/keanggotaan.html" class="hidden md:block bg-white text-blue-600 px-5 py-2.5 rounded-full font-bold text-sm shadow-md">Keanggotaan</a>
            <button id="mobile-menu-button" class="md:hidden"><i data-lucide="menu" class="w-6 h-6 text-white"></i></button>
        </div>
        <div id="mobile-menu" class="hidden md:hidden cta-gradient">
            <a href="{{ site.baseurl }}/" class="block text-center py-3 px-6 text-white text-base hover:bg-white/10 transition-colors">Beranda</a>
            <a href="{{ site.baseurl }}/tentang.html" class="block text-center py-3 px-6 text-white text-base hover:bg-white/10 transition-colors">Tentang</a>
            <a href="{{ site.baseurl }}/pengurus.html" class="block text-center py-3 px-6 text-white text-base hover:bg-white/10 transition-colors">Pengurus</a>
            <a href="{{ site.baseurl }}/rilis.html" class="block text-center py-3 px-6 text-white text-base hover:bg-white/10 transition-colors">Rilis</a>
            <div class="p-4"><a href="{{ site.baseurl }}/keanggotaan.html" class="block w-full text-center bg-white text-blue-600 px-5 py-3 rounded-full font-bold text-base">Keanggotaan</a></div>
        </div>
    </header>

    <!-- ===== KONTEN UTAMA HALAMAN KEANGGOTAAN ===== -->
    <main class="pt-24 md:pt-28 pb-16 md:pb-24">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <header class="text-center mb-12 md:mb-16 animate-on-scroll">
                <h3 class="text-sm font-bold uppercase text-[#0973D6] tracking-wider mb-2">Keanggotaan</h3>
                <h1 class="text-3xl md:text-4xl lg:text-5xl font-extrabold text-gray-900 leading-tight">Formulir Pendaftaran Kader</h1>
                <p class="mt-4 text-sm sm:text-base text-gray-600 max-w-3xl mx-auto">Isi formulir, data akan dikirim ke email pengurus dan Anda akan mendapatkan salinan PDF.</p>
            </header>
            
            <div class="max-w-2xl mx-auto">
                <form id="registration-form" class="space-y-6">
                    <!-- Input fields (sama seperti sebelumnya) -->
                    <div class="animate-on-scroll"><label for="nama-lengkap" class="block text-sm font-medium text-gray-700 mb-1.5">Nama Lengkap</label><input type="text" id="nama-lengkap" name="Nama Lengkap" placeholder="Contoh: Budi Sanjaya" class="form-input w-full text-base p-3 border border-gray-300 rounded-lg placeholder:text-sm placeholder:text-gray-400 transition" required></div>
                    <div class="animate-on-scroll"><label for="email" class="block text-sm font-medium text-gray-700 mb-1.5">Email</label><input type="email" id="email" name="Email" placeholder="contoh@gmail.com" class="form-input w-full text-base p-3 border border-gray-300 rounded-lg placeholder:text-sm placeholder:text-gray-400 transition" required></div>
                    <div class="animate-on-scroll"><label for="telepon" class="block text-sm font-medium text-gray-700 mb-1.5">Telepon</label><input type="tel" id="telepon" name="Telepon" placeholder="081234567890" class="form-input w-full text-base p-3 border border-gray-300 rounded-lg placeholder:text-sm placeholder:text-gray-400 transition" required></div>
                    <div class="animate-on-scroll"><label for="rayon" class="block text-sm font-medium text-gray-700 mb-1.5">Rayon/Fakultas</label><input type="text" id="rayon" name="Rayon/Fakultas" placeholder="Contoh: Rayon Al-Jazari Fakultas Teknik" class="form-input w-full text-base p-3 border border-gray-300 rounded-lg placeholder:text-sm placeholder:text-gray-400 transition" required></div>
                    <div class="animate-on-scroll"><label for="komisariat" class="block text-sm font-medium text-gray-700 mb-1.5">Komisariat/Kampus</label><input type="text" id="komisariat" name="Komisariat/Kampus" placeholder="Contoh: Komisariat Universitas Mataram" class="form-input w-full text-base p-3 border border-gray-300 rounded-lg placeholder:text-sm placeholder:text-gray-400 transition" required></div>
                    <div class="animate-on-scroll"><label for="cabang" class="block text-sm font-medium text-gray-700 mb-1.5">Cabang (Kabupaten/Kota)</label><input type="text" id="cabang" name="Cabang" placeholder="Contoh: Cabang Kota Mataram" class="form-input w-full text-base p-3 border border-gray-300 rounded-lg placeholder:text-sm placeholder:text-gray-400 transition" required></div>
                    <div class="animate-on-scroll"><label class="block text-sm font-medium text-gray-700 mb-1.5">Sertifikat MAPABA (jpg/png)</label><label for="sertifikat-mapaba" class="w-full flex items-center gap-3 p-3 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer transition hover:border-[#0973D6] hover:bg-blue-50"><i data-lucide="upload-cloud" class="w-5 h-5 text-gray-500"></i><span class="text-sm text-gray-500 file-name">Pilih file...</span></label><input type="file" id="sertifikat-mapaba" name="Sertifikat MAPABA" class="hidden" accept="image/jpeg, image/png" required></div>
                    <div class="animate-on-scroll"><label class="block text-sm font-medium text-gray-700 mb-1.5">Foto 4x6 (jpg/png)</label><label for="foto" class="w-full flex items-center gap-3 p-3 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer transition hover:border-[#0973D6] hover:bg-blue-50"><i data-lucide="image" class="w-5 h-5 text-gray-500"></i><span class="text-sm text-gray-500 file-name">Pilih file...</span></label><input type="file" id="foto" name="Foto" class="hidden" accept="image/jpeg, image/png" required></div>
                    
                    <!-- Container untuk pesan status (error/sukses) -->
                    <div id="status-message" class="message-box"></div>

                    <div class="pt-4 animate-on-scroll">
                        <button type="button" id="submit-button" class="w-full bg-[#0973D6] text-white font-bold text-base p-3.5 rounded-lg flex items-center justify-center gap-2 transition-all duration-300 hover:bg-[#ffcb05] hover:text-black hover:scale-105">
                            <span id="button-text">Kirim Pendaftaran</span>
                            <div id="button-spinner" class="spinner w-6 h-6 border-4 hidden" style="border-top-color: #0973D6;"></div>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <!-- ===== FOOTER ===== -->
    <footer id="kontak" class="cta-gradient text-white">
        <!-- Konten footer tidak berubah -->
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24 text-center">
            <h2 class="text-2xl lg:text-3xl font-bold mb-4">Download Sekarang!</h2>
            <p class="text-base text-white/80 mb-8 max-w-3xl mx-auto">Aplikasi Mobile Permaisindo, Platform Aktivis Pergerakan Mahasiswa Islam Indonesia.</p>
            <div class="mb-12 flex justify-center"><img src="https://i.imgur.com/jKiEQCJ.png" alt="Tangkapan layar aplikasi Permaisindo" class="h-auto max-h-[400px] md:max-h-[500px] rounded-2xl" loading="lazy"></div>
            <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
                <a href="{{ site.baseurl }}/produk-pergerakan.html" class="bg-[#FFCB05] text-black px-8 py-3 rounded-full font-bold text-base shadow-lg w-full sm:w-auto transition-all duration-300 hover:bg-yellow-400 hover:scale-105 hover:-translate-y-0.5">Produk Pergerakan</a>
                <a href="https://play.google.com/store/apps/details?id=com.pmii.permaisindo" target="_blank" rel="noopener noreferrer" class="bg-transparent border-2 border-[#FFCB05] text-[#FFCB05] px-8 py-3 rounded-full font-bold text-base w-full sm:w-auto transition-all duration-300 hover:bg-[#FFCB05] hover:text-black hover:scale-105 hover:-translate-y-0.5">Download Aplikasi</a>
            </div>
        </div>
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 pb-16">
            <div class="flex flex-col md:flex-row justify-between items-center text-center md:text-left gap-10">
                <div class="max-w-sm"><h3 class="text-lg font-semibold text-white mb-4">Alamat</h3><p class="text-sm text-white/80">Jl. Catur Warga No. 9A Kelurahan Pejanggik, Kecamatan Mataram Timur, Kota Mataram, Provinsi Nusa Tenggara Barat, Indonesia (83127).</p></div>
                <div><h3 class="text-lg font-semibold text-white mb-4">Media Sosial</h3><div class="flex justify-center md:justify-start space-x-4 mt-2"><a href="https://youtube.com/@pkcpmiibalinusra" target="_blank" rel="noopener noreferrer" class="text-gray-300 hover:text-white"><i data-lucide="youtube" class="w-5 h-5"></i></a><a href="https://facebook.com/pkcpmiibalinusatenggara" target="_blank" rel="noopener noreferrer" class="text-gray-300 hover:text-white"><i data-lucide="facebook" class="w-5 h-5"></i></a><a href="https://instagram.com/pkc.pmiibalinusra" target="_blank" rel="noopener noreferrer" class="text-gray-300 hover:text-white"><i data-lucide="instagram" class="w-5 h-5"></i></a></div></div>
            </div>
            <div class="mt-16 pt-8 border-t border-white/20 text-center text-white/60 text-sm"><p>&copy; <span id="year"></span> PKC PMII Bali Nusra.</p></div>
        </div>
    </footer>

    <!-- ===== JAVASCRIPT ===== -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- Inisialisasi Elemen ---
        const form = document.getElementById('registration-form');
        const submitButton = document.getElementById('submit-button');
        const statusMessage = document.getElementById('status-message');
        const buttonText = document.getElementById('button-text');
        const buttonSpinner = document.getElementById('button-spinner');

        // --- Logika dasar (preloader, menu, dll.) ---
        const preloader = document.getElementById('preloader');
        if (preloader) { setTimeout(() => { preloader.style.transition = "opacity .5s ease"; preloader.style.opacity = "0"; preloader.addEventListener("transitionend", () => preloader.style.display = "none"); }, 500); }
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        if (mobileMenuButton) { mobileMenuButton.addEventListener("click", () => mobileMenu.classList.toggle("hidden")); }
        const yearSpan = document.getElementById('year');
        if(yearSpan) { yearSpan.textContent = new Date().getFullYear(); }
        function setupScrollAnimations() { const animatedElements = document.querySelectorAll(".animate-on-scroll"); const observer = new IntersectionObserver(entries => { entries.forEach((entry, index) => { if (entry.isIntersecting) { entry.target.style.animationDelay = `${index * 100}ms`; entry.target.classList.add("animate-slide-in-bottom"); observer.unobserve(entry.target); } }); }, { threshold: 0.1 }); animatedElements.forEach(el => observer.observe(el)); }
        form.querySelectorAll('input[type="file"]').forEach(input => { input.addEventListener("change", function() { const fileName = this.files[0] ? this.files[0].name : "Pilih file..."; const label = this.closest('div').querySelector('label[for="' + this.id + '"]'); if (label) { const fileNameSpan = label.querySelector(".file-name"); if (fileNameSpan) { fileNameSpan.textContent = fileName; } } }); });
        lucide.createIcons();
        setupScrollAnimations();

        // --- Fungsi untuk menampilkan pesan status ---
        const showMessage = (message, isError = false) => {
            statusMessage.textContent = message;
            statusMessage.className = `message-box ${isError ? 'error' : 'success'}`;
            statusMessage.style.display = 'block';
        };

        // --- Fungsi untuk validasi form ---
        const validateForm = () => {
            let isValid = true;
            form.querySelectorAll('[required]').forEach(field => {
                field.classList.remove('border-red-500');
                if (!field.value.trim()) {
                    isValid = false;
                    field.classList.add('border-red-500');
                }
            });
            return isValid;
        };

        // --- Fungsi untuk membuat dokumen PDF ---
        const createPdf = async () => {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            const nama = document.getElementById('nama-lengkap').value;
            const sertifikatFile = document.getElementById('sertifikat-mapaba').files[0];
            const fotoFile = document.getElementById('foto').files[0];

            const readFileAsDataURL = (file) => new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result);
                reader.onerror = (error) => reject(new Error(`Gagal membaca file: ${file.name}`));
                reader.readAsDataURL(file);
            });

            const [sertifikatDataUrl, fotoDataUrl] = await Promise.all([
                readFileAsDataURL(sertifikatFile),
                readFileAsDataURL(fotoFile)
            ]);

            doc.setFontSize(18).setFont('helvetica', 'bold').text('Formulir Pendaftaran Kader PMII', 105, 20, { align: 'center' });
            doc.setFontSize(12);
            let yPos = 40;
            const addText = (label, value) => { doc.setFont('helvetica', 'bold').text(label, 20, yPos); doc.setFont('helvetica', 'normal').text(value, 70, yPos); yPos += 10; };
            addText('Nama Lengkap:', nama);
            addText('Email:', document.getElementById('email').value);
            addText('Telepon:', document.getElementById('telepon').value);
            addText('Rayon/Fakultas:', document.getElementById('rayon').value);
            addText('Komisariat/Kampus:', document.getElementById('komisariat').value);
            addText('Cabang:', document.getElementById('cabang').value);
            yPos += 5;
            doc.setFont('helvetica', 'bold').text('Foto 4x6:', 20, yPos); doc.addImage(fotoDataUrl, 'JPEG', 20, yPos + 5, 40, 60);
            doc.text('Sertifikat MAPABA:', 100, yPos); doc.addImage(sertifikatDataUrl, 'JPEG', 100, yPos + 5, 80, (doc.getImageProperties(sertifikatDataUrl).height * 80) / doc.getImageProperties(sertifikatDataUrl).width);
            
            return doc;
        };

        // --- Event handler utama saat tombol diklik ---
        if (submitButton) {
            submitButton.addEventListener('click', async () => {
                statusMessage.style.display = 'none';

                if (!validateForm()) {
                    showMessage("Harap isi semua kolom yang wajib diisi.", true);
                    return;
                }

                buttonText.classList.add('hidden');
                buttonSpinner.classList.remove('hidden');
                submitButton.disabled = true;

                try {
                    // Langkah 1: Buat PDF
                    const doc = await createPdf();
                    const nama = document.getElementById('nama-lengkap').value;
                    const pdfFileName = `Formulir-Pendaftaran-${nama.replace(/\s/g, '-')}.pdf`;

                    // Langkah 2: Siapkan data untuk dikirim
                    const formData = new FormData();
                    formData.append("apikey", "fac1c1ff-f8f0-43da-8702-0e92e1e37a48");
                    formData.append("subject", `Pendaftaran Kader Baru: ${nama}`);
                    
                    // Tambahkan semua data teks ke form
                    new FormData(form).forEach((value, key) => {
                        if (typeof value !== 'object') { // Jangan tambahkan file
                            formData.append(key, value);
                        }
                    });

                    // Tambahkan PDF sebagai lampiran file
                    const pdfBlob = doc.output('blob');
                    formData.append("attachment", pdfBlob, pdfFileName);

                    // Langkah 3: Kirim ke Web3Forms
                    const response = await fetch("https://api.web3forms.com/submit", {
                        method: "POST",
                        body: formData
                    });

                    const result = await response.json();

                    if (!result.success) {
                        throw new Error(result.message || "Gagal mengirim data ke server.");
                    }

                    // Langkah 4: Sukses!
                    showMessage("Pendaftaran berhasil terkirim! Salinan PDF akan diunduh.");
                    doc.save(pdfFileName); // Unduh PDF untuk pengguna
                    form.reset();
                    form.querySelectorAll('.file-name').forEach(span => span.textContent = 'Pilih file...');

                } catch (error) {
                    console.error("Detail Kesalahan:", error);
                    showMessage(`Terjadi kesalahan: ${error.message}. Silakan coba lagi.`, true);
                } finally {
                    // Selalu jalankan ini setelah selesai
                    buttonText.classList.remove('hidden');
                    buttonSpinner.classList.add('hidden');
                    submitButton.disabled = false;
                }
            });
        }
    });
    </script>
</body>
</html>
