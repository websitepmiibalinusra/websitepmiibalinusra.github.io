---
# Front matter ini penting agar Jekyll memproses halaman ini
layout: default
title: Kartu
---
<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <!-- Pengaturan Dasar & SEO -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kartu - PKC PMII Bali Nusra</title>
    <meta name="description" content="Bergabunglah dengan Pergerakan Mahasiswa Islam Indonesia (PMII) Bali-Nusa Tenggara. Isi formulir pendaftaran untuk menjadi kader pergerakan.">
    <meta name="keywords" content="Daftar PMII, Keanggotaan PMII, Formulir PMII, PMII Bali Nusra">

    <!-- Ikon, Font, dan Library Eksternal -->
    <link rel="icon" type="image/png" href="assets/images/favicon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Library PDF tidak diperlukan lagi -->

    <!-- Style Kustom -->
    <style>
        body { font-family: 'Inter', sans-serif; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; background-color: #ffffff; }
        .cta-gradient { background: linear-gradient(90deg, #0973D6, #2918A9); }
        .spinner { width: 56px; height: 56px; border: 8px solid rgba(255, 255, 255, .3); border-top-color: #FFCB05; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes slideInFromBottom { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .animate-on-scroll { opacity: 0; }
        .animate-slide-in-bottom { animation: slideInFromBottom .6s ease-out forwards; }
        .form-input:focus { border-color: #0973D6; box-shadow: 0 0 0 3px rgba(9, 115, 214, 0.2); outline: none; }
        .message-box { font-size: 0.875rem; margin-top: 1rem; padding: 0.75rem 1rem; border-radius: 0.5rem; display: none; }
        .message-box.error { color: #991b1b; background-color: #fef2f2; border: 1px solid #fecaca; }
        .message-box.success { color: #14532d; background-color: #f0fdf4; border: 1px solid #bbf7d0; }
    </style>
</head>
<body class="text-gray-800">

    <!-- ===== PRELOADER ===== -->
    <div id="preloader" class="fixed inset-0 z-[100] flex items-center justify-center cta-gradient">
        <div class="spinner"></div>
    </div>

    <!-- ===== HEADER & NAVIGASI ===== -->
    <header id="header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 cta-gradient shadow-xl">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-3 flex justify-between items-center">
            <a href="{{ site.baseurl }}/"><img src="assets/images/logo1.png" alt="Logo PKC PMII Bali Nusra" class="h-10 md:h-12"></a>
            <nav id="desktop-nav" class="hidden md:flex items-center space-x-6 lg:space-x-8">
                <a href="{{ site.baseurl }}/" class="text-white text-sm font-semibold hover:text-yellow-300 transition-colors">Beranda</a>
                <a href="{{ site.baseurl }}/tentang" class="text-white text-sm font-semibold hover:text-yellow-300 transition-colors">Tentang</a>
                <a href="{{ site.baseurl }}/pengurus" class="text-white text-sm font-semibold hover:text-yellow-300 transition-colors">Pengurus</a>
                <a href="{{ site.baseurl }}/rilis" class="text-white text-sm font-semibold hover:text-yellow-300 transition-colors">Rilis</a>
            </nav>
            <a href="{{ site.baseurl }}/kartu" class="hidden md:block bg-[#FFCB05] text-black px-5 py-2.5 rounded-full font-bold text-sm shadow-md">Kartu</a>
            <button id="mobile-menu-button" class="md:hidden"><i data-lucide="menu" class="w-6 h-6 text-white"></i></button>
        </div>
        <div id="mobile-menu" class="hidden md:hidden cta-gradient">
            <a href="{{ site.baseurl }}/" class="block text-center py-3 px-6 text-white text-base hover:bg-white/10 transition-colors">Beranda</a>
            <a href="{{ site.baseurl }}/tentang" class="block text-center py-3 px-6 text-white text-base hover:bg-white/10 transition-colors">Tentang</a>
            <a href="{{ site.baseurl }}/pengurus" class="block text-center py-3 px-6 text-white text-base hover:bg-white/10 transition-colors">Pengurus</a>
            <a href="{{ site.baseurl }}/rilis" class="block text-center py-3 px-6 text-white text-base hover:bg-white/10 transition-colors">Rilis</a>
            <div class="p-4"><a href="{{ site.baseurl }}/kartu" class="block w-full text-center bg-[#FFCB05] text-black px-5 py-3 rounded-full font-bold text-base">Kartu</a></div>
        </div>
    </header>

    <!-- ===== KONTEN UTAMA HALAMAN KARTU ===== -->
    <main class="pt-24 md:pt-28 pb-16 md:pb-24">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <header class="text-center mb-12 md:mb-16 animate-on-scroll">
                <h3 class="text-sm font-bold uppercase text-[#0973D6] tracking-wider mb-2">KARTU</h3>
                <h1 class="text-3xl md:text-4xl lg:text-5xl font-extrabold text-gray-900 leading-tight">Tanda Anggota</h1>
            </header>
            
            <div class="max-w-2xl mx-auto">
                <form id="registration-form" class="space-y-6">
                    <!-- Input fields -->
                    <div class="animate-on-scroll"><label for="nama-lengkap" class="block text-sm font-medium text-gray-700 mb-1.5">Nama Lengkap</label><input type="text" id="nama-lengkap" name="Nama Lengkap" placeholder="Nama Lengkap" class="form-input w-full text-base p-3 border border-gray-300 rounded-lg placeholder:text-sm placeholder:text-gray-400 transition" required></div>
                    <div class="animate-on-scroll"><label for="email" class="block text-sm font-medium text-gray-700 mb-1.5">Email</label><input type="email" id="email" name="Email" placeholder="email@gmail.com" class="form-input w-full text-base p-3 border border-gray-300 rounded-lg placeholder:text-sm placeholder:text-gray-400 transition" required></div>
                    <div class="animate-on-scroll"><label for="telepon" class="block text-sm font-medium text-gray-700 mb-1.5">Telepon</label><input type="tel" id="telepon" name="Telepon" placeholder="081234567890" class="form-input w-full text-base p-3 border border-gray-300 rounded-lg placeholder:text-sm placeholder:text-gray-400 transition" required></div>
                    <div class="animate-on-scroll"><label for="rayon" class="block text-sm font-medium text-gray-700 mb-1.5">Rayon/Fakultas</label><input type="text" id="rayon" name="Rayon/Fakultas" placeholder="Rayon Al-Jazari Fakultas Teknik" class="form-input w-full text-base p-3 border border-gray-300 rounded-lg placeholder:text-sm placeholder:text-gray-400 transition" required></div>
                    <div class="animate-on-scroll"><label for="komisariat" class="block text-sm font-medium text-gray-700 mb-1.5">Komisariat/Kampus</label><input type="text" id="komisariat" name="Komisariat/Kampus" placeholder="Komisariat Universitas Mataram" class="form-input w-full text-base p-3 border border-gray-300 rounded-lg placeholder:text-sm placeholder:text-gray-400 transition" required></div>
                    <div class="animate-on-scroll"><label for="cabang" class="block text-sm font-medium text-gray-700 mb-1.5">Cabang (Kabupaten/Kota)</label><input type="text" id="cabang" name="Cabang" placeholder="Cabang Kota Mataram" class="form-input w-full text-base p-3 border border-gray-300 rounded-lg placeholder:text-sm placeholder:text-gray-400 transition" required></div>
                    <div class="animate-on-scroll"><label class="block text-sm font-medium text-gray-700 mb-1.5">Sertifikat MAPABA (jpg/png)</label><label for="sertifikat-mapaba" class="w-full flex items-center gap-3 p-3 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer transition hover:border-[#0973D6] hover:bg-blue-50"><i data-lucide="upload-cloud" class="w-5 h-5 text-gray-500"></i><span class="text-sm text-gray-500 file-name">Pilih file...</span></label><input type="file" id="sertifikat-mapaba" name="Sertifikat MAPABA" class="hidden" accept="image/jpeg, image/png" required></div>
                    <div class="animate-on-scroll"><label class="block text-sm font-medium text-gray-700 mb-1.5">Foto 4x6 (jpg/png)</label><label for="foto" class="w-full flex items-center gap-3 p-3 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer transition hover:border-[#0973D6] hover:bg-blue-50"><i data-lucide="image" class="w-5 h-5 text-gray-500"></i><span class="text-sm text-gray-500 file-name">Pilih file...</span></label><input type="file" id="foto" name="Foto" class="hidden" accept="image/jpeg, image/png" required></div>
                    
                    <div id="status-message" class="message-box"></div>

                    <div class="pt-4 animate-on-scroll">
                        <button type="button" id="submit-button" class="w-full bg-[#0973D6] text-white font-bold text-base p-3.5 rounded-lg flex items-center justify-center gap-2 transition-all duration-300 hover:bg-[#ffcb05] hover:text-black hover:scale-105">
                            <span id="button-text">Kirim</span>
                            <div id="button-spinner" class="spinner w-6 h-6 border-4 hidden" style="border-top-color: #0973D6;"></div>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <!-- ===== FOOTER ===== -->
    <footer id="kontak" class="cta-gradient text-white">
        <!-- Konten footer -->
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24 text-center">
            <h2 class="text-2xl lg:text-3xl font-bold mb-4">Download Sekarang!</h2>
            <p class="text-base text-white/80 mb-8 max-w-3xl mx-auto">Aplikasi Mobile Permaisindo, Platform Aktivis Pergerakan.</p>
            <div class="mb-12 flex justify-center"><img src="assets/images/apk.png" alt="Tangkapan layar aplikasi Permaisindo" class="h-auto max-h-[400px] md:max-h-[500px] rounded-2xl" loading="lazy"></div>
            <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
                <a href="{{ site.baseurl }}/koleksi" class="bg-[#FFCB05] text-black px-8 py-3 rounded-full font-bold text-base shadow-lg w-full sm:w-auto transition-all duration-300 hover:bg-yellow-400 hover:scale-105 hover:-translate-y-0.5">Koleksi</a>
                <a href="https://play.google.com/store/apps/details?id=com.pmii.permaisindo" target="_blank" rel="noopener noreferrer" class="bg-transparent border-2 border-[#FFCB05] text-[#FFCB05] px-8 py-3 rounded-full font-bold text-base w-full sm:w-auto transition-all duration-300 hover:bg-[#FFCB05] hover:text-black hover:scale-105 hover:-translate-y-0.5">Download Aplikasi</a>
            </div>
        </div>
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 pb-16">
            <div class="flex flex-col md:flex-row justify-between items-center text-center md:text-left gap-10">
                <div class="max-w-sm"><h3 class="text-lg font-semibold text-white mb-4">Alamat</h3><p class="text-sm text-white/80">Jl. Catur Warga No. 9A Kelurahan Pejanggik, Kecamatan Mataram Timur, Kota Mataram, Provinsi Nusa Tenggara Barat, Indonesia (83127).</p></div>
                <div><h3 class="text-lg font-semibold text-white mb-4">Media Sosial</h3><div class="flex justify-center md:justify-start space-x-4 mt-2"><a href="https://youtube.com/@pkcpmiibalinusra" target="_blank" rel="noopener noreferrer" class="text-gray-300 hover:text-white"><i data-lucide="youtube" class="w-5 h-5"></i></a><a href="https://facebook.com/pkcpmiibalinusatenggara" target="_blank" rel="noopener noreferrer" class="text-gray-300 hover:text-white"><i data-lucide="facebook" class="w-5 h-5"></i></a><a href="https://instagram.com/pkc.pmiibalinusra" target="_blank" rel="noopener noreferrer" class="text-gray-300 hover:text-white"><i data-lucide="instagram" class="w-5 h-5"></i></a></div></div>
            </div>
            <div class="mt-16 pt-8 border-t border-white/20 text-center text-white/60 text-sm"><p>&copy; <span id="year"></span> PKC PMII Bali Nusra.</p></div>
        </div>
    </footer>

    <!-- ===== JAVASCRIPT ===== -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- Inisialisasi Elemen ---
        const form = document.getElementById('registration-form');
        const submitButton = document.getElementById('submit-button');
        const statusMessage = document.getElementById('status-message');
        const buttonText = document.getElementById('button-text');
        const buttonSpinner = document.getElementById('button-spinner');
        
        // URL Google Apps Script Anda yang baru
        const googleScriptUrl = 'https://script.google.com/macros/s/AKfycbypnZlLyyNlwVJK8_KgE-C_4B5L0TkXd5ulfawnyDCHGRAuSjy0udLLyRiIDIwiPKtc9w/exec';

        // --- Logika dasar (preloader, menu, dll.) ---
        const preloader = document.getElementById('preloader');
        if (preloader) { setTimeout(() => { preloader.style.transition = "opacity .5s ease"; preloader.style.opacity = "0"; preloader.addEventListener("transitionend", () => preloader.style.display = "none"); }, 500); }
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        if (mobileMenuButton) { mobileMenuButton.addEventListener("click", () => mobileMenu.classList.toggle("hidden")); }
        const yearSpan = document.getElementById('year');
        if(yearSpan) { yearSpan.textContent = new Date().getFullYear(); }
        function setupScrollAnimations() { const animatedElements = document.querySelectorAll(".animate-on-scroll"); const observer = new IntersectionObserver(entries => { entries.forEach((entry, index) => { if (entry.isIntersecting) { entry.target.style.animationDelay = `${index * 100}ms`; entry.target.classList.add("animate-slide-in-bottom"); observer.unobserve(entry.target); } }); }, { threshold: 0.1 }); animatedElements.forEach(el => observer.observe(el)); }
        form.querySelectorAll('input[type="file"]').forEach(input => { input.addEventListener("change", function() { const fileName = this.files[0] ? this.files[0].name : "Pilih file..."; const label = this.closest('div').querySelector('label[for="' + this.id + '"]'); if (label) { const fileNameSpan = label.querySelector(".file-name"); if (fileNameSpan) { fileNameSpan.textContent = fileName; } } }); });
        lucide.createIcons();
        setupScrollAnimations();

        const showMessage = (message, isError = false) => {
            statusMessage.textContent = message;
            statusMessage.className = `message-box ${isError ? 'error' : 'success'}`;
            statusMessage.style.display = 'block';
        };

        const validateForm = () => {
            let isValid = true;
            form.querySelectorAll('[required]').forEach(field => {
                field.classList.remove('border-red-500');
                if (!field.value.trim()) {
                    isValid = false;
                    field.classList.add('border-red-500');
                }
            });
            return isValid;
        };
        
        const readFileAsDataURL = (file) => new Promise((resolve, reject) => {
            if (!file) return reject(new Error("File tidak ditemukan."));
            const reader = new FileReader();
            reader.onload = () => resolve(reader.result);
            reader.onerror = (error) => reject(new Error(`Gagal membaca file: ${file.name}`));
            reader.readAsDataURL(file);
        });

        if (submitButton) {
            submitButton.addEventListener('click', async () => {
                statusMessage.style.display = 'none';
                if (!validateForm()) {
                    showMessage("Harap isi semua kolom yang wajib diisi.", true);
                    return;
                }
                if (googleScriptUrl === 'PASTE_URL_BARU_ANDA_DI_SINI') {
                    showMessage("Kesalahan Konfigurasi: URL Google Script belum dimasukkan.", true);
                    return;
                }

                buttonText.classList.add('hidden');
                buttonSpinner.classList.remove('hidden');
                submitButton.disabled = true;

                try {
                    showMessage("Mengumpulkan data formulir...");
                    const formDataObject = {};
                    new FormData(form).forEach((value, key) => {
                        if (typeof value === 'string') formDataObject[key] = value;
                    });

                    showMessage("Membaca file gambar...");
                    const fotoFile = document.getElementById('foto').files[0];
                    const sertifikatFile = document.getElementById('sertifikat-mapaba').files[0];

                    const [fotoBase64, sertifikatBase64] = await Promise.all([
                        readFileAsDataURL(fotoFile),
                        readFileAsDataURL(sertifikatFile)
                    ]);
                    
                    const payload = {
                        formData: formDataObject,
                        fotoFile: { name: fotoFile.name, type: fotoFile.type, data: fotoBase64 },
                        sertifikatFile: { name: sertifikatFile.name, type: sertifikatFile.type, data: sertifikatBase64 }
                    };

                    showMessage("Mengirim data ke server untuk diarsipkan...");
                    const response = await fetch(googleScriptUrl, {
                        method: 'POST',
                        body: JSON.stringify(payload),
                        headers: { 'Content-Type': 'text/plain;charset=utf-8' }
                    }).catch(networkError => {
                        throw new Error("Gagal terhubung ke server. Periksa koneksi internet Anda atau pastikan izin deployment skrip sudah benar (diatur untuk 'Siapa saja').");
                    });
                    
                    if (!response.ok) throw new Error(`Server merespons dengan error (status: ${response.status}). Pastikan URL skrip benar dan sudah di-deploy ulang dengan izin 'Siapa saja'.`);
                    const result = await response.json();
                    if (result.status !== 'success') throw new Error(result.message || "Gagal mendapatkan nomor anggota dari server.");
                    
                    showMessage(result.message);
                    form.reset();
                    form.querySelectorAll('.file-name').forEach(span => span.textContent = 'Pilih file...');

                } catch (error) {
                    console.error("Detail Kesalahan:", error);
                    showMessage(`Terjadi kesalahan: ${error.message}`, true);
                } finally {
                    buttonText.classList.remove('hidden');
                    buttonSpinner.classList.add('hidden');
                    submitButton.disabled = false;
                }
            });
        }
    });
    </script>
</body>
</html>
